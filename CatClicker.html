<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="assets/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<title>Cat Clicker</title>
</head>

<body>

	<div id="cat-page">
		<div class="list" id="list">
			<ul id="cat-list"> </ul>
		</div>

		<div class="cats" id="cat-facts">
			<h3 id="cat-name"></h3>
			<h3 id="cat-clicks"></h3>
			<div id="pic-layout">
				<img id='cat-pic'>
			</div>
		</div>

	</div>

	<script type="text/javascript">

		var model = {
			cats : [
				{
					name : 'Vampire Cat', 
					pic : 'assets/vampirecat.jpg', 
					click : 0
				},
				{
					name : 'Cowboy Cat', 
					pic : 'assets/cowboycat.jpg', 
					click : 0
				},
				{
					name : 'Coffee Cat', 
					pic : 'assets/coffeecat.jpg',
					click :  0
				},
				{
					name : 'Flower Cat', 
					pic : 'assets/flowercat.jpg', 
					click : 0
				},
				{ 
					name :'iCat', 
					pic : 'assets/iCat.jpg',
					click : 0
				}
			],

			currentCat : null

		};

		var octopus = {
			init : function(){
				model.currentCat = model.cats[0];
				view.init();
				view.renderList(model.cats);
				if (model.currentCat != null ){
					view.renderCatDetails();
				}
			},

			setCurrentCat : function(data){
				model.currentCat = data;
			},

			getCatDetails : function() {
				return model.currentCat;
			},

			increaseCatClicks : function(){
				model.currentCat.click += 1;
			}

		};

		var view = {

			init : function() {
				this.catName = document.getElementById('cat-name');
				this.catClicks = document.getElementById('cat-clicks');
				this.catPic = document.getElementById('cat-pic');
				this.catList = document.getElementById('cat-list');

			},

			renderList : function(data){
				for (var i = 0; i < data.length; i++){
					var catObject = data[i];

					var item = document.createElement('li');
					item.textContent = catObject.name;
					
					item.addEventListener('click', (function(catObjectCopy){
						return function(){
							octopus.setCurrentCat(catObjectCopy);
							octopus.increaseCatClicks();
							view.renderCatDetails();
						};

					})(catObject));

					this.catList.appendChild(item);
				}
			},

			renderCatDetails : function() {
				details = octopus.getCatDetails();
				this.catName.textContent = details.name;
				this.catClicks.textContent = "Clicks: " + details.click;
				this.catPic.src = details.pic;
			}

		};

		octopus.init();


	</script>

</body>

</html>